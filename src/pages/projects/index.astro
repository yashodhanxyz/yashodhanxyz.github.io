---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { projectEntries } from '../../data/projects';
import { SITE, absoluteUrl } from '../../utils/site';

const pageTitle = 'Yashodhan | Projects';
const description = 'Side builds and product experiments that keep my craft sharp.';

const pageUrl = new URL(Astro.url.pathname, Astro.site ?? SITE.url).toString();
const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'CollectionPage',
    name: 'Projects',
    url: pageUrl,
    description,
    mainEntity: projectEntries.map((project, index) => ({
      '@type': 'CreativeWork',
      name: project.title,
      description: project.summary,
      url: absoluteUrl(`/projects/${project.slug}`),
      position: index + 1,
    })),
  },
];
---

<BaseLayout title={pageTitle} description={description} structuredData={structuredData}>
  <section class="projects-intro" aria-labelledby="projects-heading">
    <h1 id="projects-heading">Projects</h1>
    <p>
      Experiments, product accelerators, and storytelling platforms that I ship alongside client work. Each project sharpens a
      facet of the craftâ€”workflow automation, research rituals, or narrative systems.
    </p>
  </section>

  <section aria-label="Project list" class="projects-list">
    <ul>
      {projectEntries.map((project) => (
        <li>
          <article class="project-card">
            <header>
              <h2>
                <a href={`/projects/${project.slug}`}>{project.title}</a>
              </h2>
              <p class="project-card__tagline">{project.tagline}</p>
            </header>
            <p class="project-card__summary">{project.summary}</p>
            <a class="project-card__cta" href={`/projects/${project.slug}`}>Explore project</a>
          </article>
        </li>
      ))}
    </ul>
  </section>

  <style>
    .projects-intro {
      max-width: 68ch;
      display: grid;
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .projects-intro h1 {
      margin: 0;
      font-size: clamp(2rem, 4vw, 2.6rem);
    }

    .projects-list ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 1.5rem;
    }

    .project-card {
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      padding: 1.75rem;
      background: var(--color-surface);
      display: grid;
      gap: 0.75rem;
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }

    .project-card h2 {
      margin: 0;
      font-size: 1.35rem;
    }

    .project-card header a {
      color: inherit;
    }

    .project-card header a:hover,
    .project-card header a:focus-visible {
      text-decoration: underline;
    }

    .project-card__tagline {
      margin: 0.35rem 0 0;
      color: var(--color-muted);
      font-weight: 600;
    }

    .project-card__summary {
      margin: 0;
      line-height: 1.65;
    }

    .project-card__cta {
      font-weight: 600;
      color: var(--color-accent);
      justify-self: flex-start;
    }

    .project-card__cta:hover,
    .project-card__cta:focus-visible {
      text-decoration: underline;
    }

    .project-card:hover,
    .project-card:focus-within {
      transform: translateY(-3px);
      box-shadow: 0 18px 36px rgba(15, 23, 42, 0.08);
    }
  </style>
</BaseLayout>
